(define (domain practica3)



    (:requirements :strips :adl :typing :fluents)



    (:types

        dia ejercicio - object

    )



    (:functions

        (minutos-disponibles ?dia - dia)

        (duracion ?ej - ejercicio)

        (nivel ?ej - ejercicio)

        (slot ?ej - ejercicio ?dia - dia)

        (siguiente-slot ?dia - dia)

        (numero-de-dia ?dia - dia)

    )







    (:predicates

        (ejercicio-realizado ?e - ejercicio ?di - dia)

        (preparador ?pre - ejercicio ?post - ejercicio)

        (precursor ?pre - ejercicio ?post - ejercicio)

    )





    (:action asignar

        :parameters (?ej - ejercicio ?dia - dia)



        :precondition (and

            (>= (minutos-disponibles ?dia) (duracion ?ej))

            (<=  (siguiente-slot ?dia) 5)

            ;no ha realizado este ejercicio este dia

            (not (ejercicio-realizado ?ej ?dia))





            ;si tiene ejercicio preparador, ha de hacerlo antes el mismo dia

            (forall (?pre - ejercicio)                                  ; Para cada ejercicio

                (and (or (not (preparador ?pre ?ej))                     ;   O no es preparador

                         (and

                            (ejercicio-realizado ?pre ?dia)

                            (< (slot ?pre ?dia) (siguiente-slot ?dia))      ;       O, si es precursor, realiza el ejercicio en el dia

                        )

                    )

                    (or (not (precursor ?pre ?ej))                          ;   O no es precursor

                        (and

                            (ejercicio-realizado ?pre ?dia)

                            (= (slot ?pre ?dia) (- (siguiente-slot ?dia) 1))      ;       O, si es precursor, realiza el ejercicio en el dia

                        )

                    )

                )

           )

        )



        :effect (and

            (assign (slot ?ej ?dia) (siguiente-slot ?dia))

            (increase (siguiente-slot ?dia) 1)

            (increase (nivel ?ej) 1)

            (ejercicio-realizado ?ej ?dia)

            (decrease (minutos-disponibles ?dia) (duracion ?ej))

        )

    )

)
